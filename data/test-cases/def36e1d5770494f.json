{"uid":"def36e1d5770494f","name":"Просмотр профиля","fullName":"tests_api.test_view_profile.TestApiProfile#test_view_profile","historyId":"a7d34a5a5395a10d9ef26be14a78ae0c","time":{"start":1719292357706,"stop":1719292358069,"duration":363},"status":"failed","statusMessage":"AssertionError: [{\"type\":\"string_type\",\"loc\":[\"data\",\"city\"],\"msg\":\"Input should be a valid string\",\"input\":{\"value\":\"Some text\",\"hash\":\"1afa856134a73aac2a64f3bda844da40a35a14913f0687815d5c37a17f9193d6\"},\"url\":\"https://errors.pydantic.dev/2.3/v/string_type\"}]","statusTrace":"self = <tests_api.utils.asserts.Assertion object at 0x7ff1fd16f3a0>\nscheme = <class 'tests_api.models.profle.UserProfile'>\n\n    def should_actual_scheme(self, scheme):\n        with allure.step(\"Валидация json-схемы\"):\n            try:\n>               scheme.parse_obj(self.actual_value)\n\ntests_api/utils/asserts.py:138: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/usr/local/lib/python3.10/dist-packages/typing_extensions.py:2562: in wrapper\n    return __arg(*args, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncls = <class 'tests_api.models.profle.UserProfile'>\nobj = {'data': {'about_myself': None, 'additional_phone': None, 'avatar_url': 'https://storage.yandexcloud.net/pub-test/avat...jpg', 'city': {'hash': '1afa856134a73aac2a64f3bda844da40a35a14913f0687815d5c37a17f9193d6', 'value': 'Some text'}, ...}}\n\n    @classmethod\n    @typing_extensions.deprecated(\n        'The `parse_obj` method is deprecated; use `model_validate` instead.', category=PydanticDeprecatedSince20\n    )\n    def parse_obj(cls: type[Model], obj: Any) -> Model:  # noqa: D102\n        warnings.warn('The `parse_obj` method is deprecated; use `model_validate` instead.', DeprecationWarning)\n>       return cls.model_validate(obj)\nE       pydantic_core._pydantic_core.ValidationError: 1 validation error for UserProfile\nE       data.city\nE         Input should be a valid string [type=string_type, input_value={'value': 'Some text', 'h...0687815d5c37a17f9193d6'}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.3/v/string_type\n\n/usr/local/lib/python3.10/dist-packages/pydantic/main.py:976: ValidationError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <tests_api.test_view_profile.TestApiProfile object at 0x7ff1ff5af100>\nassertion = <class 'tests_api.utils.asserts.Assertion'>\nprofile_api = <tests_api.api.profile.ProfileApi object at 0x7ff1fd16d300>\n\n    @allure.title(\"Просмотр профиля\")\n    @allure.feature(\"[API] UsersProfile\")\n    def test_view_profile(self, assertion, profile_api) -> None:\n        resp = profile_api.user_profile_view(\n            access_token=env_vars.ACCESS_TOKEN,\n        )\n>       assertion(resp.json()).should_actual_scheme(UserProfile)\n\ntests_api/test_view_profile.py:26: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <tests_api.utils.asserts.Assertion object at 0x7ff1fd16f3a0>\nscheme = <class 'tests_api.models.profle.UserProfile'>\n\n    def should_actual_scheme(self, scheme):\n        with allure.step(\"Валидация json-схемы\"):\n            try:\n                scheme.parse_obj(self.actual_value)\n            except ValidationError as e:\n>               assert False, e.json()\nE               AssertionError: [{\"type\":\"string_type\",\"loc\":[\"data\",\"city\"],\"msg\":\"Input should be a valid string\",\"input\":{\"value\":\"Some text\",\"hash\":\"1afa856134a73aac2a64f3bda844da40a35a14913f0687815d5c37a17f9193d6\"},\"url\":\"https://errors.pydantic.dev/2.3/v/string_type\"}]\n\ntests_api/utils/asserts.py:140: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"base_url","time":{"start":1719292349518,"stop":1719292349518,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1719292349518,"stop":1719292349518,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1719292349518,"stop":1719292349518,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"_session_faker","time":{"start":1719292349518,"stop":1719292349608,"duration":90},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1719292349518,"stop":1719292349518,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"assertion","time":{"start":1719292349608,"stop":1719292349608,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"base_url_showcase","time":{"start":1719292349608,"stop":1719292349608,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"env","time":{"start":1719292349608,"stop":1719292349608,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"browser_type_launch_args","time":{"start":1719292349609,"stop":1719292349609,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"playwright","time":{"start":1719292349609,"stop":1719292349962,"duration":353},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"launch_browser","time":{"start":1719292349963,"stop":1719292349963,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"browser_type","time":{"start":1719292349963,"stop":1719292349963,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1719292349963,"stop":1719292350212,"duration":249},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"browser_context_args","time":{"start":1719292350213,"stop":1719292350213,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"device","time":{"start":1719292350213,"stop":1719292350213,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"context","time":{"start":1719292357653,"stop":1719292357658,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"page","time":{"start":1719292357658,"stop":1719292357704,"duration":46},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"screenshot_on_failure","time":{"start":1719292357704,"stop":1719292357705,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"profile_api","time":{"start":1719292357705,"stop":1719292357705,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"api_client_showcase","time":{"start":1719292357705,"stop":1719292357705,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: [{\"type\":\"string_type\",\"loc\":[\"data\",\"city\"],\"msg\":\"Input should be a valid string\",\"input\":{\"value\":\"Some text\",\"hash\":\"1afa856134a73aac2a64f3bda844da40a35a14913f0687815d5c37a17f9193d6\"},\"url\":\"https://errors.pydantic.dev/2.3/v/string_type\"}]","statusTrace":"self = <tests_api.utils.asserts.Assertion object at 0x7ff1fd16f3a0>\nscheme = <class 'tests_api.models.profle.UserProfile'>\n\n    def should_actual_scheme(self, scheme):\n        with allure.step(\"Валидация json-схемы\"):\n            try:\n>               scheme.parse_obj(self.actual_value)\n\ntests_api/utils/asserts.py:138: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n/usr/local/lib/python3.10/dist-packages/typing_extensions.py:2562: in wrapper\n    return __arg(*args, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncls = <class 'tests_api.models.profle.UserProfile'>\nobj = {'data': {'about_myself': None, 'additional_phone': None, 'avatar_url': 'https://storage.yandexcloud.net/pub-test/avat...jpg', 'city': {'hash': '1afa856134a73aac2a64f3bda844da40a35a14913f0687815d5c37a17f9193d6', 'value': 'Some text'}, ...}}\n\n    @classmethod\n    @typing_extensions.deprecated(\n        'The `parse_obj` method is deprecated; use `model_validate` instead.', category=PydanticDeprecatedSince20\n    )\n    def parse_obj(cls: type[Model], obj: Any) -> Model:  # noqa: D102\n        warnings.warn('The `parse_obj` method is deprecated; use `model_validate` instead.', DeprecationWarning)\n>       return cls.model_validate(obj)\nE       pydantic_core._pydantic_core.ValidationError: 1 validation error for UserProfile\nE       data.city\nE         Input should be a valid string [type=string_type, input_value={'value': 'Some text', 'h...0687815d5c37a17f9193d6'}, input_type=dict]\nE           For further information visit https://errors.pydantic.dev/2.3/v/string_type\n\n/usr/local/lib/python3.10/dist-packages/pydantic/main.py:976: ValidationError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <tests_api.test_view_profile.TestApiProfile object at 0x7ff1ff5af100>\nassertion = <class 'tests_api.utils.asserts.Assertion'>\nprofile_api = <tests_api.api.profile.ProfileApi object at 0x7ff1fd16d300>\n\n    @allure.title(\"Просмотр профиля\")\n    @allure.feature(\"[API] UsersProfile\")\n    def test_view_profile(self, assertion, profile_api) -> None:\n        resp = profile_api.user_profile_view(\n            access_token=env_vars.ACCESS_TOKEN,\n        )\n>       assertion(resp.json()).should_actual_scheme(UserProfile)\n\ntests_api/test_view_profile.py:26: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <tests_api.utils.asserts.Assertion object at 0x7ff1fd16f3a0>\nscheme = <class 'tests_api.models.profle.UserProfile'>\n\n    def should_actual_scheme(self, scheme):\n        with allure.step(\"Валидация json-схемы\"):\n            try:\n                scheme.parse_obj(self.actual_value)\n            except ValidationError as e:\n>               assert False, e.json()\nE               AssertionError: [{\"type\":\"string_type\",\"loc\":[\"data\",\"city\"],\"msg\":\"Input should be a valid string\",\"input\":{\"value\":\"Some text\",\"hash\":\"1afa856134a73aac2a64f3bda844da40a35a14913f0687815d5c37a17f9193d6\"},\"url\":\"https://errors.pydantic.dev/2.3/v/string_type\"}]\n\ntests_api/utils/asserts.py:140: AssertionError","steps":[{"name":"Отправить GET запрос на api/users/profile","time":{"start":1719292357706,"stop":1719292358068,"duration":362},"status":"passed","steps":[{"name":"request","time":{"start":1719292357706,"stop":1719292358068,"duration":362},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"method","value":"'GET'"},{"name":"url","value":"'https://dev.agentum.pro/backend/api/users/profile'"},{"name":"timeout","value":"5000"},{"name":"params","value":"None"},{"name":"headers","value":"{'Content-type': 'application/json', 'Authorization': 'Bearer YwQogs0aDUHzYIgAIN88OBaTDiKesDmAdciD9vkz'}"}],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"Валидация json-схемы","time":{"start":1719292358069,"stop":1719292358069,"duration":0},"status":"failed","statusMessage":"AssertionError: [{\"type\":\"string_type\",\"loc\":[\"data\",\"city\"],\"msg\":\"Input should be a valid string\",\"input\":{\"value\":\"Some text\",\"hash\":\"1afa856134a73aac2a64f3bda844da40a35a14913f0687815d5c37a17f9193d6\"},\"url\":\"https://errors.pydantic.dev/2.3/v/string_type\"}]\n","statusTrace":"  File \"/builds/2uit/Chmaki_autotests/tests_api/utils/asserts.py\", line 140, in should_actual_scheme\n    assert False, e.json()\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":3,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"api_client_showcase::0","time":{"start":1719292358159,"stop":1719292358159,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"screenshot_on_failure::0","time":{"start":1719292358159,"stop":1719292358249,"duration":90},"status":"passed","steps":[],"attachments":[{"uid":"e75b3ad558633886","name":"screenshot_test_view_profile","source":"e75b3ad558633886.png","type":"image/png","size":5320}],"parameters":[],"stepsCount":0,"attachmentsCount":1,"shouldDisplayMessage":false,"hasContent":true,"attachmentStep":false},{"name":"context::0","time":{"start":1719292358250,"stop":1719292358263,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"page::0","time":{"start":1719292358250,"stop":1719292358250,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"browser::0","time":{"start":1719292364974,"stop":1719292365016,"duration":42},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1719292365019,"stop":1719292365026,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"[API] UsersProfile"},{"name":"parentSuite","value":"Чмаки. API"},{"name":"subSuite","value":"API запросы по профилю"},{"name":"suite","value":"API тесты"},{"name":"tag","value":"api"},{"name":"host","value":"runner-vlhmfsk-project-154-concurrent-0"},{"name":"thread","value":"60-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests_api.test_view_profile"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":["api"]},"source":"def36e1d5770494f.json","parameterValues":["'chromium'"]}